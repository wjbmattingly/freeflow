{% extends "base.html" %}

{% block title %}Projects - FreeFlow{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Projects</h1>
        <button class="btn btn-primary" onclick="showCreateProject()">+ New Project</button>
    </div>

    <div class="search-bar">
        <input type="text" id="searchProjects" placeholder="Search projects" oninput="filterProjects()">
        <select id="sortBy" onchange="loadProjects()">
            <option value="date_edited">Sort: Date Edited</option>
            <option value="date_created">Sort: Date Created</option>
            <option value="name">Sort: Name</option>
        </select>
    </div>

    <div id="projectsGrid" class="projects-grid">
        <!-- Projects will be loaded here -->
    </div>
</div>

<!-- Create Project Modal -->
<div id="createProjectModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>Let's create your project.</h2>
            <button class="close-btn" onclick="closeCreateProject()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-group">
                    <label>Project Name</label>
                    <input type="text" id="projectName" placeholder='E.g., "Dog Breeds" or "Car Models"'>
                </div>
                <div class="form-group">
                    <label>Annotation Group</label>
                    <input type="text" id="annotationGroup" placeholder='E.g., "dogs" or "cars" or "words"'>
                </div>
            </div>

            <div class="project-types">
                <h3>Project Type</h3>
                
                <div class="project-type-card active" data-type="object_detection">
                    <div class="type-header">
                        <h4>Object Detection</h4>
                        <div class="type-badges">
                            <span class="badge">Bounding Boxes</span>
                            <span class="badge">Counts</span>
                            <span class="badge">Tracking</span>
                        </div>
                    </div>
                    <p>Identify objects and their positions with bounding boxes.</p>
                </div>

                <div class="project-type-card" data-type="classification">
                    <div class="type-header">
                        <h4>Classification</h4>
                        <div class="type-badges">
                            <span class="badge">Image Labels</span>
                            <span class="badge">Filtering</span>
                        </div>
                    </div>
                    <p>Assign labels to the entire image.</p>
                </div>

                <div class="project-type-card" data-type="segmentation">
                    <div class="type-header">
                        <h4>Instance Segmentation</h4>
                        <div class="type-badges">
                            <span class="badge">Polygons</span>
                            <span class="badge">Measuring</span>
                        </div>
                    </div>
                    <p>Detect multiple objects and their actual shape.</p>
                </div>
            </div>

            <div class="classes-section">
                <h3>Classes</h3>
                <div id="classesList">
                    <div class="class-item">
                        <input type="text" class="class-name-input" placeholder="Class name" value="object">
                        <input type="color" class="class-color-input" value="#FF6B6B">
                        <button class="btn-icon" onclick="this.parentElement.remove()">âœ•</button>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="addClass()">+ Add Class</button>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCreateProject()">Cancel</button>
                <button class="btn btn-primary" onclick="createProject()">Create Public Project</button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/projects.js') }}"></script>
{% endblock %}

